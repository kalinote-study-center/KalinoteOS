     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_task_now
     7 00000000                                 	EXTERN	_cons_putstr0
     8 00000000                                 	EXTERN	_sprintf
     9 00000000                                 	EXTERN	_cons_newline
    10 00000000                                 [FILE "cmd_dir.c"]
    11                                          [SECTION .data]
    12 00000000                                 LC1:
    13 00000000 46 49 4C 45 4E 41 4D 45 09 09   	DB	"FILENAME",0x09,0x09,"TYPE  ",0x09,0x09,0x09," SIZE",0x09,0x09,"PROPERTIES",0x0A,0x0A,0x00
       0000000A 54 59 50 45 20 20 09 09 09 20 
       00000014 53 49 5A 45 09 09 50 52 4F 50 
       0000001E 45 52 54 49 45 53 0A 0A 00 
    14 00000027                                 LC3:
    15 00000027 66 69 6C 65 6E 61 6D 65 20 20   	DB	"filename      ext file     %7d Byte",0x09,0x09,"NormalFile",0x0A,0x00
       00000031 20 20 20 20 65 78 74 20 66 69 
       0000003B 6C 65 20 20 20 20 20 25 37 64 
       00000045 20 42 79 74 65 09 09 4E 6F 72 
       0000004F 6D 61 6C 46 69 6C 65 0A 00 
    16 00000058                                 LC2:
    17 00000058 66 69 6C 65 6E 61 6D 65 20 20   	DB	"filename      ext ",0xCE,0xC4,0xBC,0xFE,"     %7d ",0xD7,0xD6,0xBD,0xDA,0x09,0x09,0xC6,0xD5,0xCD,0xA8,0xCE,0xC4,0xBC,0xFE,0x0A,0x00
       00000062 20 20 20 20 65 78 74 20 CE C4 
       0000006C BC FE 20 20 20 20 20 25 37 64 
       00000076 20 D7 D6 BD DA 09 09 C6 D5 CD 
       00000080 A8 CE C4 BC FE 0A 00 
    18 00000087                                 LC5:
    19 00000087 66 69 6C 65 6E 61 6D 65 20 20   	DB	"filename      ext file     %7d Byte",0x09,0x09," ReadOnly",0x0A,0x00
       00000091 20 20 20 20 65 78 74 20 66 69 
       0000009B 6C 65 20 20 20 20 20 25 37 64 
       000000A5 20 42 79 74 65 09 09 20 52 65 
       000000AF 61 64 4F 6E 6C 79 0A 00 
    20 000000B7                                 LC4:
    21 000000B7 66 69 6C 65 6E 61 6D 65 20 20   	DB	"filename      ext ",0xCE,0xC4,0xBC,0xFE,"     %7d ",0xD7,0xD6,0xBD,0xDA,0x09,0x09,0xD6,0xBB,0xB6,0xC1,0xCE,0xC4,0xBC,0xFE,0x0A,0x00
       000000C1 20 20 20 20 65 78 74 20 CE C4 
       000000CB BC FE 20 20 20 20 20 25 37 64 
       000000D5 20 D7 D6 BD DA 09 09 D6 BB B6 
       000000DF C1 CE C4 BC FE 0A 00 
    22 000000E6                                 LC7:
    23 000000E6 66 69 6C 65 6E 61 6D 65 20 20   	DB	"filename      ext file     %7d Byte",0x09,0x09,"SystemFile",0x0A,0x00
       000000F0 20 20 20 20 65 78 74 20 66 69 
       000000FA 6C 65 20 20 20 20 20 25 37 64 
       00000104 20 42 79 74 65 09 09 53 79 73 
       0000010E 74 65 6D 46 69 6C 65 0A 00 
    24 00000117                                 LC6:
    25 00000117 66 69 6C 65 6E 61 6D 65 20 20   	DB	"filename      ext ",0xCE,0xC4,0xBC,0xFE,"     %7d ",0xD7,0xD6,0xBD,0xDA,0x09,0x09,0xCF,0xB5,0xCD,0xB3,0xCE,0xC4,0xBC,0xFE,0x0A,0x00
       00000121 20 20 20 20 65 78 74 20 CE C4 
       0000012B BC FE 20 20 20 20 20 25 37 64 
       00000135 20 D7 D6 BD DA 09 09 CF B5 CD 
       0000013F B3 CE C4 BC FE 0A 00 
    26 00000146                                 LC9:
    27 00000146 66 69 6C 65 6E 61 6D 65 20 20   	DB	"filename     Directory     %7d Byte",0x09,0x09,"Directory",0x0A,0x00
       00000150 20 20 20 44 69 72 65 63 74 6F 
       0000015A 72 79 20 20 20 20 20 25 37 64 
       00000164 20 42 79 74 65 09 09 44 69 72 
       0000016E 65 63 74 6F 72 79 0A 00 
    28 00000176                                 LC8:
    29 00000176 66 69 6C 65 6E 61 6D 65 20 20   	DB	"filename        ",0xC4,0xBF,0xC2,0xBC,"       %7d ",0xD7,0xD6,0xBD,0xDA,0x09,0x09,"  ",0xC4,0xBF,0xC2,0xBC,0x0A,0x00
       00000180 20 20 20 20 20 20 C4 BF C2 BC 
       0000018A 20 20 20 20 20 20 20 25 37 64 
       00000194 20 D7 D6 BD DA 09 09 20 20 C4 
       0000019E BF C2 BC 0A 00 
    30 000001A3                                 LC0:
    31 000001A3 CE C4 BC FE C3 FB 09 09 09 C0   	DB	0xCE,0xC4,0xBC,0xFE,0xC3,0xFB,0x09,0x09,0x09,0xC0,0xE0,0xD0,0xCD,"  ",0x09,0x09,0x09," ",0xB4,0xF3,0xD0,0xA1,0x09,0x09,"  ",0xCA,0xF4,0xD0,0xD4,0x0A,0x0A,0x00
       000001AD E0 D0 CD 20 20 09 09 09 20 B4 
       000001B7 F3 D0 A1 09 09 20 20 CA F4 D0 
       000001C1 D4 0A 0A 00 
    32                                          [SECTION .text]
    33 00000000                                 	GLOBAL	_cmd_dir
    34 00000000                                 _cmd_dir:
    35 00000000 55                              	PUSH	EBP
    36 00000001 89 E5                           	MOV	EBP,ESP
    37 00000003 57                              	PUSH	EDI
    38 00000004 56                              	PUSH	ESI
    39 00000005 53                              	PUSH	EBX
    40 00000006 83 EC 44                        	SUB	ESP,68
    41 00000009 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
    42 0000000C E8 [00000000]                   	CALL	_task_now
    43 00000011 89 C6                           	MOV	ESI,EAX
    44 00000013 80 B8 00000128 01               	CMP	BYTE [296+EAX],1
    45 0000001A 0F 84 000001B1                  	JE	L63
    46 00000020 68 [00000000]                   	PUSH	LC1
    47 00000025                                 L55:
    48 00000025 57                              	PUSH	EDI
    49 00000026 E8 [00000000]                   	CALL	_cons_putstr0
    50 0000002B 59                              	POP	ECX
    51 0000002C 5B                              	POP	EBX
    52 0000002D 31 DB                           	XOR	EBX,EBX
    53 0000002F C7 45 B0 00000000               	MOV	DWORD [-80+EBP],0
    54 00000036                                 L45:
    55 00000036 8A 83 00102600                  	MOV	AL,BYTE [1058304+EBX]
    56 0000003C 84 C0                           	TEST	AL,AL
    57 0000003E 0F 84 00000084                  	JE	L5
    58 00000044 3C E5                           	CMP	AL,-27
    59 00000046 74 6D                           	JE	L6
    60 00000048 8A 83 0010260B                  	MOV	AL,BYTE [1058315+EBX]
    61 0000004E A9 000000DF                     	TEST	EAX,223
    62 00000053 0F 85 0000008A                  	JNE	L10
    63 00000059 80 BE 00000128 01               	CMP	BYTE [296+ESI],1
    64 00000060 74 74                           	JE	L64
    65 00000062 FF B3 0010261C                  	PUSH	DWORD [1058332+EBX]
    66 00000068 68 [00000027]                   	PUSH	LC3
    67 0000006D                                 L56:
    68 0000006D 8D 45 B4                        	LEA	EAX,DWORD [-76+EBP]
    69 00000070 50                              	PUSH	EAX
    70 00000071 E8 [00000000]                   	CALL	_sprintf
    71 00000076 8D 8B 00102600                  	LEA	ECX,DWORD [1058304+EBX]
    72 0000007C 83 C4 0C                        	ADD	ESP,12
    73 0000007F 31 D2                           	XOR	EDX,EDX
    74 00000081                                 L17:
    75 00000081 8A 01                           	MOV	AL,BYTE [ECX]
    76 00000083 41                              	INC	ECX
    77 00000084 88 44 15 B4                     	MOV	BYTE [-76+EBP+EDX*1],AL
    78 00000088 42                              	INC	EDX
    79 00000089 83 FA 07                        	CMP	EDX,7
    80 0000008C 7E F3                           	JLE	L17
    81 0000008E                                 L62:
    82 0000008E 8A 83 00102608                  	MOV	AL,BYTE [1058312+EBX]
    83 00000094 88 45 C2                        	MOV	BYTE [-62+EBP],AL
    84 00000097 8A 83 00102609                  	MOV	AL,BYTE [1058313+EBX]
    85 0000009D 88 45 C3                        	MOV	BYTE [-61+EBP],AL
    86 000000A0 8A 83 0010260A                  	MOV	AL,BYTE [1058314+EBX]
    87 000000A6 88 45 C4                        	MOV	BYTE [-60+EBP],AL
    88 000000A9                                 L60:
    89 000000A9 8D 45 B4                        	LEA	EAX,DWORD [-76+EBP]
    90 000000AC 50                              	PUSH	EAX
    91 000000AD 57                              	PUSH	EDI
    92 000000AE E8 [00000000]                   	CALL	_cons_putstr0
    93 000000B3 58                              	POP	EAX
    94 000000B4 5A                              	POP	EDX
    95 000000B5                                 L6:
    96 000000B5 FF 45 B0                        	INC	DWORD [-80+EBP]
    97 000000B8 83 C3 20                        	ADD	EBX,32
    98 000000BB 81 7D B0 000000DF               	CMP	DWORD [-80+EBP],223
    99 000000C2 0F 8E FFFFFF6E                  	JLE	L45
   100 000000C8                                 L5:
   101 000000C8 57                              	PUSH	EDI
   102 000000C9 E8 [00000000]                   	CALL	_cons_newline
   103 000000CE 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   104 000000D1 5B                              	POP	EBX
   105 000000D2 5E                              	POP	ESI
   106 000000D3 5F                              	POP	EDI
   107 000000D4 5D                              	POP	EBP
   108 000000D5 C3                              	RET
   109 000000D6                                 L64:
   110 000000D6 FF B3 0010261C                  	PUSH	DWORD [1058332+EBX]
   111 000000DC 68 [00000058]                   	PUSH	LC2
   112 000000E1 EB 8A                           	JMP	L56
   113 000000E3                                 L10:
   114 000000E3 A9 000000FE                     	TEST	EAX,254
   115 000000E8 75 47                           	JNE	L19
   116 000000EA 80 BE 00000128 01               	CMP	BYTE [296+ESI],1
   117 000000F1 74 31                           	JE	L65
   118 000000F3 FF B3 0010261C                  	PUSH	DWORD [1058332+EBX]
   119 000000F9 68 [00000087]                   	PUSH	LC5
   120 000000FE                                 L57:
   121 000000FE 8D 45 B4                        	LEA	EAX,DWORD [-76+EBP]
   122 00000101 50                              	PUSH	EAX
   123 00000102 E8 [00000000]                   	CALL	_sprintf
   124 00000107 8D 8B 00102600                  	LEA	ECX,DWORD [1058304+EBX]
   125 0000010D 83 C4 0C                        	ADD	ESP,12
   126 00000110 31 D2                           	XOR	EDX,EDX
   127 00000112                                 L26:
   128 00000112 8A 01                           	MOV	AL,BYTE [ECX]
   129 00000114 41                              	INC	ECX
   130 00000115 88 44 15 B4                     	MOV	BYTE [-76+EBP+EDX*1],AL
   131 00000119 42                              	INC	EDX
   132 0000011A 83 FA 07                        	CMP	EDX,7
   133 0000011D 7E F3                           	JLE	L26
   134 0000011F E9 FFFFFF6A                     	JMP	L62
   135 00000124                                 L65:
   136 00000124 FF B3 0010261C                  	PUSH	DWORD [1058332+EBX]
   137 0000012A 68 [000000B7]                   	PUSH	LC4
   138 0000012F EB CD                           	JMP	L57
   139 00000131                                 L19:
   140 00000131 A9 000000FB                     	TEST	EAX,251
   141 00000136 75 47                           	JNE	L28
   142 00000138 80 BE 00000128 01               	CMP	BYTE [296+ESI],1
   143 0000013F 74 31                           	JE	L66
   144 00000141 FF B3 0010261C                  	PUSH	DWORD [1058332+EBX]
   145 00000147 68 [000000E6]                   	PUSH	LC7
   146 0000014C                                 L58:
   147 0000014C 8D 45 B4                        	LEA	EAX,DWORD [-76+EBP]
   148 0000014F 50                              	PUSH	EAX
   149 00000150 E8 [00000000]                   	CALL	_sprintf
   150 00000155 8D 8B 00102600                  	LEA	ECX,DWORD [1058304+EBX]
   151 0000015B 83 C4 0C                        	ADD	ESP,12
   152 0000015E 31 D2                           	XOR	EDX,EDX
   153 00000160                                 L35:
   154 00000160 8A 01                           	MOV	AL,BYTE [ECX]
   155 00000162 41                              	INC	ECX
   156 00000163 88 44 15 B4                     	MOV	BYTE [-76+EBP+EDX*1],AL
   157 00000167 42                              	INC	EDX
   158 00000168 83 FA 07                        	CMP	EDX,7
   159 0000016B 7E F3                           	JLE	L35
   160 0000016D E9 FFFFFF1C                     	JMP	L62
   161 00000172                                 L66:
   162 00000172 FF B3 0010261C                  	PUSH	DWORD [1058332+EBX]
   163 00000178 68 [00000117]                   	PUSH	LC6
   164 0000017D EB CD                           	JMP	L58
   165 0000017F                                 L28:
   166 0000017F A9 000000EF                     	TEST	EAX,239
   167 00000184 0F 85 FFFFFF2B                  	JNE	L6
   168 0000018A 80 BE 00000128 01               	CMP	BYTE [296+ESI],1
   169 00000191 74 31                           	JE	L67
   170 00000193 FF B3 0010261C                  	PUSH	DWORD [1058332+EBX]
   171 00000199 68 [00000146]                   	PUSH	LC9
   172 0000019E                                 L59:
   173 0000019E 8D 45 B4                        	LEA	EAX,DWORD [-76+EBP]
   174 000001A1 50                              	PUSH	EAX
   175 000001A2 E8 [00000000]                   	CALL	_sprintf
   176 000001A7 8D 8B 00102600                  	LEA	ECX,DWORD [1058304+EBX]
   177 000001AD 83 C4 0C                        	ADD	ESP,12
   178 000001B0 31 D2                           	XOR	EDX,EDX
   179 000001B2                                 L44:
   180 000001B2 8A 01                           	MOV	AL,BYTE [ECX]
   181 000001B4 41                              	INC	ECX
   182 000001B5 88 44 15 B4                     	MOV	BYTE [-76+EBP+EDX*1],AL
   183 000001B9 42                              	INC	EDX
   184 000001BA 83 FA 07                        	CMP	EDX,7
   185 000001BD 7E F3                           	JLE	L44
   186 000001BF E9 FFFFFEE5                     	JMP	L60
   187 000001C4                                 L67:
   188 000001C4 FF B3 0010261C                  	PUSH	DWORD [1058332+EBX]
   189 000001CA 68 [00000176]                   	PUSH	LC8
   190 000001CF EB CD                           	JMP	L59
   191 000001D1                                 L63:
   192 000001D1 68 [000001A3]                   	PUSH	LC0
   193 000001D6 E9 FFFFFE4A                     	JMP	L55
