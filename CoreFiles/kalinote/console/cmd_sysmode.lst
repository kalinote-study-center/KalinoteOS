     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_task_now
     7 00000000                                 	EXTERN	_sprintf
     8 00000000                                 	EXTERN	_cons_putstr0
     9 00000000                                 	EXTERN	_sheet_updown
    10 00000000                                 [FILE "cmd_sysmode.c"]
    11                                          [SECTION .data]
    12 00000000                                 LC7:
    13 00000000 54 68 69 73 20 73 79 73 74 65   	DB	"This system mode is not defined,mode code:%d",0x0A,0x00
       0000000A 6D 20 6D 6F 64 65 20 69 73 20 
       00000014 6E 6F 74 20 64 65 66 69 6E 65 
       0000001E 64 2C 6D 6F 64 65 20 63 6F 64 
       00000028 65 3A 25 64 0A 00 
    14 0000002E                                 LC6:
    15 0000002E B8 C3 CF B5 CD B3 C4 A3 CA BD   	DB	0xB8,0xC3,0xCF,0xB5,0xCD,0xB3,0xC4,0xA3,0xCA,0xBD,0xCE,0xB4,0xB6,0xA8,0xD2,0xE5,0xA3,0xAC,0xC4,0xA3,0xCA,0xBD,0xC2,0xEB,0xA3,0xBA,"%d",0x0A,0x00
       00000038 CE B4 B6 A8 D2 E5 A3 AC C4 A3 
       00000042 CA BD C2 EB A3 BA 25 64 0A 00 
    16 0000004C                                 LC3:
    17 0000004C 44 45 42 55 47 20 4D 4F 44 45   	DB	"DEBUG MODE",0x0A,0x00
       00000056 0A 00 
    18 00000058                                 LC5:
    19 00000058 53 79 73 74 65 6D 20 73 77 69   	DB	"System switch to debug mode",0x0A,0x00
       00000062 74 63 68 20 74 6F 20 64 65 62 
       0000006C 75 67 20 6D 6F 64 65 0A 00 
    20 00000075                                 LC4:
    21 00000075 CF B5 CD B3 C7 D0 BB BB B5 BD   	DB	0xCF,0xB5,0xCD,0xB3,0xC7,0xD0,0xBB,0xBB,0xB5,0xBD,0xB5,0xF7,0xCA,0xD4,0xC4,0xA3,0xCA,0xBD,0x0A,0x00
       0000007F B5 F7 CA D4 C4 A3 CA BD 0A 00 
    22 00000089                                 LC2:
    23 00000089 53 79 73 74 65 6D 20 73 77 69   	DB	"System switch to normal mode",0x0A,0x00
       00000093 74 63 68 20 74 6F 20 6E 6F 72 
       0000009D 6D 61 6C 20 6D 6F 64 65 0A 00 
    24 000000A7                                 LC1:
    25 000000A7 CF B5 CD B3 C7 D0 BB BB B5 BD   	DB	0xCF,0xB5,0xCD,0xB3,0xC7,0xD0,0xBB,0xBB,0xB5,0xBD,0xD5,0xFD,0xB3,0xA3,0xC4,0xA3,0xCA,0xBD,0x0A,0x00
       000000B1 D5 FD B3 A3 C4 A3 CA BD 0A 00 
    26 000000BB                                 LC0:
    27 000000BB 53 79 73 74 65 6D 20 6D 6F 64   	DB	"System mode has no change",0x0A,0x00
       000000C5 65 20 68 61 73 20 6E 6F 20 63 
       000000CF 68 61 6E 67 65 0A 00 
    28                                          [SECTION .text]
    29 00000000                                 	GLOBAL	_cmd_sysmode
    30 00000000                                 _cmd_sysmode:
    31 00000000 55                              	PUSH	EBP
    32 00000001 89 E5                           	MOV	EBP,ESP
    33 00000003 57                              	PUSH	EDI
    34 00000004 56                              	PUSH	ESI
    35 00000005 53                              	PUSH	EBX
    36 00000006 83 EC 44                        	SUB	ESP,68
    37 00000009 8B 35 00010000                  	MOV	ESI,DWORD [65536]
    38 0000000F E8 [00000000]                   	CALL	_task_now
    39 00000014 8B 1D 00030000                  	MOV	EBX,DWORD [196608]
    40 0000001A 89 45 B0                        	MOV	DWORD [-80+EBP],EAX
    41 0000001D 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
    42 00000020 8A 50 08                        	MOV	DL,BYTE [8+EAX]
    43 00000023 83 EA 30                        	SUB	EDX,48
    44 00000026 66 0F BE FA                     	MOVSX	DI,DL
    45 0000002A 57                              	PUSH	EDI
    46 0000002B DF 04 24                        	FILD	WORD [ESP]
    47 0000002E DD 06                           	FLD	QWORD [ESI]
    48 00000030 83 C4 04                        	ADD	ESP,4
    49 00000033 DA E9                           	FUCOMPP
    50 00000035 DF E0                           	FNSTSW	AX
    51 00000037 9E                              	SAHF
    52 00000038 0F 84 000000F0                  	JE	L17
    53 0000003E                                 L2:
    54 0000003E 84 D2                           	TEST	DL,DL
    55 00000040 0F 84 000000A1                  	JE	L18
    56 00000046 FE CA                           	DEC	DL
    57 00000048 74 4A                           	JE	L19
    58 0000004A 57                              	PUSH	EDI
    59 0000004B 8B 45 B0                        	MOV	EAX,DWORD [-80+EBP]
    60 0000004E DF 04 24                        	FILD	WORD [ESP]
    61 00000051 83 C4 04                        	ADD	ESP,4
    62 00000054 DD 16                           	FST	QWORD [ESI]
    63 00000056 80 B8 00000128 01               	CMP	BYTE [296+EAX],1
    64 0000005D 74 28                           	JE	L20
    65 0000005F 83 EC 08                        	SUB	ESP,8
    66 00000062 DD 1C 24                        	FSTP	QWORD [ESP]
    67 00000065 68 [00000000]                   	PUSH	LC7
    68 0000006A                                 L15:
    69 0000006A 8D 5D B4                        	LEA	EBX,DWORD [-76+EBP]
    70 0000006D 53                              	PUSH	EBX
    71 0000006E E8 [00000000]                   	CALL	_sprintf
    72 00000073 53                              	PUSH	EBX
    73 00000074 FF 75 08                        	PUSH	DWORD [8+EBP]
    74 00000077 E8 [00000000]                   	CALL	_cons_putstr0
    75 0000007C 83 C4 18                        	ADD	ESP,24
    76 0000007F                                 L1:
    77 0000007F 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
    78 00000082 5B                              	POP	EBX
    79 00000083 5E                              	POP	ESI
    80 00000084 5F                              	POP	EDI
    81 00000085 5D                              	POP	EBP
    82 00000086 C3                              	RET
    83 00000087                                 L20:
    84 00000087 83 EC 08                        	SUB	ESP,8
    85 0000008A DD 1C 24                        	FSTP	QWORD [ESP]
    86 0000008D 68 [0000002E]                   	PUSH	LC6
    87 00000092 EB D6                           	JMP	L15
    88 00000094                                 L19:
    89 00000094 8B 43 20                        	MOV	EAX,DWORD [32+EBX]
    90 00000097 C7 06 00000000                  	MOV	DWORD [ESI],0
    91 0000009D C7 46 04 3FF00000               	MOV	DWORD [4+ESI],1072693248
    92 000000A4 FF 70 10                        	PUSH	DWORD [16+EAX]
    93 000000A7 53                              	PUSH	EBX
    94 000000A8 E8 [00000000]                   	CALL	_sheet_updown
    95 000000AD 68 [0000004C]                   	PUSH	LC3
    96 000000B2 8B 43 28                        	MOV	EAX,DWORD [40+EBX]
    97 000000B5 FF B0 00000110                  	PUSH	DWORD [272+EAX]
    98 000000BB E8 [00000000]                   	CALL	_cons_putstr0
    99 000000C0 8B 45 B0                        	MOV	EAX,DWORD [-80+EBP]
   100 000000C3 83 C4 10                        	ADD	ESP,16
   101 000000C6 80 B8 00000128 01               	CMP	BYTE [296+EAX],1
   102 000000CD 74 11                           	JE	L21
   103 000000CF 68 [00000058]                   	PUSH	LC5
   104 000000D4                                 L16:
   105 000000D4 FF 75 08                        	PUSH	DWORD [8+EBP]
   106 000000D7 E8 [00000000]                   	CALL	_cons_putstr0
   107 000000DC 58                              	POP	EAX
   108 000000DD 5A                              	POP	EDX
   109 000000DE EB 9F                           	JMP	L1
   110 000000E0                                 L21:
   111 000000E0 68 [00000075]                   	PUSH	LC4
   112 000000E5 EB ED                           	JMP	L16
   113 000000E7                                 L18:
   114 000000E7 C7 06 00000000                  	MOV	DWORD [ESI],0
   115 000000ED C7 46 04 00000000               	MOV	DWORD [4+ESI],0
   116 000000F4 6A FF                           	PUSH	-1
   117 000000F6 53                              	PUSH	EBX
   118 000000F7 E8 [00000000]                   	CALL	_sheet_updown
   119 000000FC 58                              	POP	EAX
   120 000000FD 8B 45 B0                        	MOV	EAX,DWORD [-80+EBP]
   121 00000100 5A                              	POP	EDX
   122 00000101 80 B8 00000128 01               	CMP	BYTE [296+EAX],1
   123 00000108 74 1D                           	JE	L22
   124 0000010A 68 [00000089]                   	PUSH	LC2
   125 0000010F                                 L14:
   126 0000010F FF 75 08                        	PUSH	DWORD [8+EBP]
   127 00000112 E8 [00000000]                   	CALL	_cons_putstr0
   128 00000117 59                              	POP	ECX
   129 00000118 5B                              	POP	EBX
   130 00000119 57                              	PUSH	EDI
   131 0000011A DF 04 24                        	FILD	WORD [ESP]
   132 0000011D 83 C4 04                        	ADD	ESP,4
   133 00000120 DD 1E                           	FSTP	QWORD [ESI]
   134 00000122 E9 FFFFFF58                     	JMP	L1
   135 00000127                                 L22:
   136 00000127 68 [000000A7]                   	PUSH	LC1
   137 0000012C EB E1                           	JMP	L14
   138 0000012E                                 L17:
   139 0000012E 0F 8A FFFFFF0A                  	JP	L2
   140 00000134 68 [000000BB]                   	PUSH	LC0
   141 00000139 FF 75 08                        	PUSH	DWORD [8+EBP]
   142 0000013C E8 [00000000]                   	CALL	_cons_putstr0
   143 00000141 E9 FFFFFF39                     	JMP	L1
