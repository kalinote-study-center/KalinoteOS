     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_sheet_alloc
     7 00000000                                 	EXTERN	_memman_alloc_4k
     8 00000000                                 	EXTERN	_sheet_setbuf
     9 00000000                                 	EXTERN	_boxfill8
    10 00000000                                 	EXTERN	_sheet_slide
    11 00000000                                 	EXTERN	_sheet_updown
    12 00000000                                 	EXTERN	_make_menu
    13 00000000                                 	EXTERN	_add_options
    14 00000000                                 	EXTERN	_make_button
    15 00000000                                 	EXTERN	_show_button
    16 00000000                                 	EXTERN	_shtctl_init
    17 00000000                                 	EXTERN	_debug_print
    18 00000000                                 	EXTERN	_hide_button
    19 00000000                                 	EXTERN	_sheet_refresh
    20 00000000                                 	EXTERN	_release_button
    21 00000000                                 	EXTERN	_hide_menu
    22 00000000                                 	EXTERN	_show_menu
    23 00000000                                 	EXTERN	_fifo32_put
    24 00000000                                 	EXTERN	_acpi_shutdown
    25 00000000                                 	EXTERN	_reset_cpu
    26 00000000                                 [FILE "taskbar.c"]
    27                                          [SECTION .data]
    28 00000000                                 LC0:
    29 00000000 6F 70 65 6E 20 63 6F 6E 73 6F   	DB	"open console",0x00
       0000000A 6C 65 00 
    30 0000000D                                 LC1:
    31 0000000D 73 68 75 74 64 6F 77 6E 00      	DB	"shutdown",0x00
    32 00000016                                 LC2:
    33 00000016 72 65 62 6F 6F 74 00            	DB	"reboot",0x00
    34 0000001D                                 LC3:
    35 0000001D 72 65 73 65 72 76 65 00         	DB	"reserve",0x00
    36 00000025                                 LC4:
    37 00000025 46 75 6E 63 74 69 6F 6E 00      	DB	"Function",0x00
    38                                          [SECTION .text]
    39 00000000                                 	GLOBAL	_init_taskbar
    40 00000000                                 _init_taskbar:
    41 00000000 55                              	PUSH	EBP
    42 00000001 89 E5                           	MOV	EBP,ESP
    43 00000003 57                              	PUSH	EDI
    44 00000004 56                              	PUSH	ESI
    45 00000005 8B 75 0C                        	MOV	ESI,DWORD [12+EBP]
    46 00000008 53                              	PUSH	EBX
    47 00000009 8B 3D 00030200                  	MOV	EDI,DWORD [197120]
    48 0000000F 83 7E 24 00                     	CMP	DWORD [36+ESI],0
    49 00000013 0F 84 0000025B                  	JE	L10
    50 00000019                                 L2:
    51 00000019 FF 76 24                        	PUSH	DWORD [36+ESI]
    52 0000001C E8 [00000000]                   	CALL	_sheet_alloc
    53 00000021 89 C3                           	MOV	EBX,EAX
    54 00000023 8B 46 08                        	MOV	EAX,DWORD [8+ESI]
    55 00000026 0F AF 46 04                     	IMUL	EAX,DWORD [4+ESI]
    56 0000002A C1 E0 02                        	SAL	EAX,2
    57 0000002D 50                              	PUSH	EAX
    58 0000002E FF 75 08                        	PUSH	DWORD [8+EBP]
    59 00000031 E8 [00000000]                   	CALL	_memman_alloc_4k
    60 00000036 6A FF                           	PUSH	-1
    61 00000038 FF 76 08                        	PUSH	DWORD [8+ESI]
    62 0000003B FF 76 04                        	PUSH	DWORD [4+ESI]
    63 0000003E 50                              	PUSH	EAX
    64 0000003F 53                              	PUSH	EBX
    65 00000040 E8 [00000000]                   	CALL	_sheet_setbuf
    66 00000045 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
    67 00000048 83 C4 20                        	ADD	ESP,32
    68 0000004B 83 E8 1C                        	SUB	EAX,28
    69 0000004E C7 43 1C 00000065               	MOV	DWORD [28+EBX],101
    70 00000055 C7 43 2C 00000000               	MOV	DWORD [44+EBX],0
    71 0000005C 50                              	PUSH	EAX
    72 0000005D 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
    73 00000060 48                              	DEC	EAX
    74 00000061 50                              	PUSH	EAX
    75 00000062 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
    76 00000065 83 E8 1C                        	SUB	EAX,28
    77 00000068 50                              	PUSH	EAX
    78 00000069 6A 00                           	PUSH	0
    79 0000006B 68 00C6C6C6                     	PUSH	13027014
    80 00000070 FF 73 04                        	PUSH	DWORD [4+EBX]
    81 00000073 FF 33                           	PUSH	DWORD [EBX]
    82 00000075 E8 [00000000]                   	CALL	_boxfill8
    83 0000007A 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
    84 0000007D 83 E8 1B                        	SUB	EAX,27
    85 00000080 50                              	PUSH	EAX
    86 00000081 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
    87 00000084 48                              	DEC	EAX
    88 00000085 50                              	PUSH	EAX
    89 00000086 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
    90 00000089 83 E8 1B                        	SUB	EAX,27
    91 0000008C 50                              	PUSH	EAX
    92 0000008D 6A 00                           	PUSH	0
    93 0000008F 68 00FFFFFF                     	PUSH	16777215
    94 00000094 FF 73 04                        	PUSH	DWORD [4+EBX]
    95 00000097 FF 33                           	PUSH	DWORD [EBX]
    96 00000099 E8 [00000000]                   	CALL	_boxfill8
    97 0000009E 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
    98 000000A1 83 C4 38                        	ADD	ESP,56
    99 000000A4 48                              	DEC	EAX
   100 000000A5 50                              	PUSH	EAX
   101 000000A6 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   102 000000A9 48                              	DEC	EAX
   103 000000AA 50                              	PUSH	EAX
   104 000000AB 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   105 000000AE 83 E8 1A                        	SUB	EAX,26
   106 000000B1 50                              	PUSH	EAX
   107 000000B2 6A 00                           	PUSH	0
   108 000000B4 68 00C6C6C6                     	PUSH	13027014
   109 000000B9 FF 73 04                        	PUSH	DWORD [4+EBX]
   110 000000BC FF 33                           	PUSH	DWORD [EBX]
   111 000000BE E8 [00000000]                   	CALL	_boxfill8
   112 000000C3 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   113 000000C6 83 E8 18                        	SUB	EAX,24
   114 000000C9 50                              	PUSH	EAX
   115 000000CA 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   116 000000CD 83 E8 04                        	SUB	EAX,4
   117 000000D0 50                              	PUSH	EAX
   118 000000D1 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   119 000000D4 83 E8 18                        	SUB	EAX,24
   120 000000D7 50                              	PUSH	EAX
   121 000000D8 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   122 000000DB 83 E8 4B                        	SUB	EAX,75
   123 000000DE 50                              	PUSH	EAX
   124 000000DF 68 00848484                     	PUSH	8684676
   125 000000E4 FF 73 04                        	PUSH	DWORD [4+EBX]
   126 000000E7 FF 33                           	PUSH	DWORD [EBX]
   127 000000E9 E8 [00000000]                   	CALL	_boxfill8
   128 000000EE 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   129 000000F1 83 C4 38                        	ADD	ESP,56
   130 000000F4 83 E8 04                        	SUB	EAX,4
   131 000000F7 50                              	PUSH	EAX
   132 000000F8 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   133 000000FB 83 E8 4B                        	SUB	EAX,75
   134 000000FE 50                              	PUSH	EAX
   135 000000FF 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   136 00000102 83 E8 17                        	SUB	EAX,23
   137 00000105 50                              	PUSH	EAX
   138 00000106 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   139 00000109 83 E8 4B                        	SUB	EAX,75
   140 0000010C 50                              	PUSH	EAX
   141 0000010D 68 00848484                     	PUSH	8684676
   142 00000112 FF 73 04                        	PUSH	DWORD [4+EBX]
   143 00000115 FF 33                           	PUSH	DWORD [EBX]
   144 00000117 E8 [00000000]                   	CALL	_boxfill8
   145 0000011C 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   146 0000011F 83 E8 03                        	SUB	EAX,3
   147 00000122 50                              	PUSH	EAX
   148 00000123 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   149 00000126 83 E8 04                        	SUB	EAX,4
   150 00000129 50                              	PUSH	EAX
   151 0000012A 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   152 0000012D 83 E8 03                        	SUB	EAX,3
   153 00000130 50                              	PUSH	EAX
   154 00000131 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   155 00000134 83 E8 4B                        	SUB	EAX,75
   156 00000137 50                              	PUSH	EAX
   157 00000138 68 00FFFFFF                     	PUSH	16777215
   158 0000013D FF 73 04                        	PUSH	DWORD [4+EBX]
   159 00000140 FF 33                           	PUSH	DWORD [EBX]
   160 00000142 E8 [00000000]                   	CALL	_boxfill8
   161 00000147 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   162 0000014A 83 C4 38                        	ADD	ESP,56
   163 0000014D 83 E8 03                        	SUB	EAX,3
   164 00000150 50                              	PUSH	EAX
   165 00000151 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   166 00000154 83 E8 03                        	SUB	EAX,3
   167 00000157 50                              	PUSH	EAX
   168 00000158 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   169 0000015B 83 E8 18                        	SUB	EAX,24
   170 0000015E 50                              	PUSH	EAX
   171 0000015F 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   172 00000162 83 E8 03                        	SUB	EAX,3
   173 00000165 50                              	PUSH	EAX
   174 00000166 68 00FFFFFF                     	PUSH	16777215
   175 0000016B FF 73 04                        	PUSH	DWORD [4+EBX]
   176 0000016E FF 33                           	PUSH	DWORD [EBX]
   177 00000170 E8 [00000000]                   	CALL	_boxfill8
   178 00000175 6A 00                           	PUSH	0
   179 00000177 6A 00                           	PUSH	0
   180 00000179 53                              	PUSH	EBX
   181 0000017A E8 [00000000]                   	CALL	_sheet_slide
   182 0000017F 83 C4 28                        	ADD	ESP,40
   183 00000182 6A 00                           	PUSH	0
   184 00000184 53                              	PUSH	EBX
   185 00000185 E8 [00000000]                   	CALL	_sheet_updown
   186 0000018A 68 00000262                     	PUSH	610
   187 0000018F 6A 05                           	PUSH	5
   188 00000191 FF 75 08                        	PUSH	DWORD [8+EBP]
   189 00000194 E8 [00000000]                   	CALL	_make_menu
   190 00000199 68 [00000567]                   	PUSH	_onOpenConsoleClick
   191 0000019E 68 [00000000]                   	PUSH	LC0
   192 000001A3 A3 [000000FC]                   	MOV	DWORD [_start_menu],EAX
   193 000001A8 50                              	PUSH	EAX
   194 000001A9 E8 [00000000]                   	CALL	_add_options
   195 000001AE 83 C4 20                        	ADD	ESP,32
   196 000001B1 68 [00000579]                   	PUSH	_onShutdownClick
   197 000001B6 68 [0000000D]                   	PUSH	LC1
   198 000001BB FF 35 [000000FC]                	PUSH	DWORD [_start_menu]
   199 000001C1 E8 [00000000]                   	CALL	_add_options
   200 000001C6 68 [00000582]                   	PUSH	_on8042ResetCPUClick
   201 000001CB 68 [00000016]                   	PUSH	LC2
   202 000001D0 FF 35 [000000FC]                	PUSH	DWORD [_start_menu]
   203 000001D6 E8 [00000000]                   	CALL	_add_options
   204 000001DB 68 [0000058B]                   	PUSH	_onUselessClick
   205 000001E0 68 [0000001D]                   	PUSH	LC3
   206 000001E5 FF 35 [000000FC]                	PUSH	DWORD [_start_menu]
   207 000001EB E8 [00000000]                   	CALL	_add_options
   208 000001F0 83 C4 24                        	ADD	ESP,36
   209 000001F3 68 [0000058B]                   	PUSH	_onUselessClick
   210 000001F8 68 [0000001D]                   	PUSH	LC3
   211 000001FD FF 35 [000000FC]                	PUSH	DWORD [_start_menu]
   212 00000203 E8 [00000000]                   	CALL	_add_options
   213 00000208 68 [0000052D]                   	PUSH	_onStartButtonClick
   214 0000020D 68 00C6C6C6                     	PUSH	13027014
   215 00000212 68 [00000025]                   	PUSH	LC4
   216 00000217 6A 04                           	PUSH	4
   217 00000219 6A 02                           	PUSH	2
   218 0000021B 6A 17                           	PUSH	23
   219 0000021D 6A 46                           	PUSH	70
   220 0000021F FF 75 08                        	PUSH	DWORD [8+EBP]
   221 00000222 E8 [00000000]                   	CALL	_make_button
   222 00000227 83 C4 2C                        	ADD	ESP,44
   223 0000022A 89 C3                           	MOV	EBX,EAX
   224 0000022C 50                              	PUSH	EAX
   225 0000022D FF 75 08                        	PUSH	DWORD [8+EBP]
   226 00000230 56                              	PUSH	ESI
   227 00000231 E8 [00000000]                   	CALL	_show_button
   228 00000236 BA 00000100                     	MOV	EDX,256
   229 0000023B A1 [000000FC]                   	MOV	EAX,DWORD [_start_menu]
   230 00000240 89 5F 10                        	MOV	DWORD [16+EDI],EBX
   231 00000243 89 47 0C                        	MOV	DWORD [12+EDI],EAX
   232 00000246 C7 07 00000000                  	MOV	DWORD [EDI],0
   233 0000024C C7 47 04 00000000               	MOV	DWORD [4+EDI],0
   234 00000253 C7 47 08 00000000               	MOV	DWORD [8+EDI],0
   235 0000025A 83 C4 0C                        	ADD	ESP,12
   236 0000025D 8D 47 18                        	LEA	EAX,DWORD [24+EDI]
   237 00000260                                 L7:
   238 00000260 C7 00 00000000                  	MOV	DWORD [EAX],0
   239 00000266 83 C0 14                        	ADD	EAX,20
   240 00000269 4A                              	DEC	EDX
   241 0000026A 79 F4                           	JNS	L7
   242 0000026C 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   243 0000026F 5B                              	POP	EBX
   244 00000270 5E                              	POP	ESI
   245 00000271 5F                              	POP	EDI
   246 00000272 5D                              	POP	EBP
   247 00000273 C3                              	RET
   248 00000274                                 L10:
   249 00000274 FF 76 08                        	PUSH	DWORD [8+ESI]
   250 00000277 FF 76 04                        	PUSH	DWORD [4+ESI]
   251 0000027A FF 36                           	PUSH	DWORD [ESI]
   252 0000027C FF 75 08                        	PUSH	DWORD [8+EBP]
   253 0000027F E8 [00000000]                   	CALL	_shtctl_init
   254 00000284 83 C4 10                        	ADD	ESP,16
   255 00000287 89 46 24                        	MOV	DWORD [36+ESI],EAX
   256 0000028A 89 70 14                        	MOV	DWORD [20+EAX],ESI
   257 0000028D E9 FFFFFD87                     	JMP	L2
   258                                          [SECTION .data]
   259 0000002E                                 LC5:
   260 0000002E 74 61 73 6B 62 61 72 3E 61 64   	DB	"taskbar>add a taskbar button",0x0A,0x00
       00000038 64 20 61 20 74 61 73 6B 62 61 
       00000042 72 20 62 75 74 74 6F 6E 0A 00 
   261 0000004C                                 LC6:
   262 0000004C 74 61 73 6B 62 61 72 3E 68 69   	DB	"taskbar>hide index:%d",0x0A,0x00
       00000056 64 65 20 69 6E 64 65 78 3A 25 
       00000060 64 0A 00 
   263 00000063                                 LC7:
   264 00000063 74 61 73 6B 62 61 72 3E 6E 65   	DB	"taskbar>new button index:%d, row:%d",0x0A,0x00
       0000006D 77 20 62 75 74 74 6F 6E 20 69 
       00000077 6E 64 65 78 3A 25 64 2C 20 72 
       00000081 6F 77 3A 25 64 0A 00 
   265 00000088                                 LC8:
   266 00000088 74 61 73 6B 62 61 72 3E 42 75   	DB	"taskbar>Button index has been used up",0x00
       00000092 74 74 6F 6E 20 69 6E 64 65 78 
       0000009C 20 68 61 73 20 62 65 65 6E 20 
       000000A6 75 73 65 64 20 75 70 00 
   267                                          [SECTION .text]
   268 00000292                                 	GLOBAL	_taskbar_addwin
   269 00000292                                 _taskbar_addwin:
   270 00000292 55                              	PUSH	EBP
   271 00000293 89 E5                           	MOV	EBP,ESP
   272 00000295 57                              	PUSH	EDI
   273 00000296 56                              	PUSH	ESI
   274 00000297 53                              	PUSH	EBX
   275 00000298 83 EC 24                        	SUB	ESP,36
   276 0000029B 8B 1D 00030200                  	MOV	EBX,DWORD [197120]
   277 000002A1 A1 00030100                     	MOV	EAX,DWORD [196864]
   278 000002A6 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   279 000002A9 89 45 D0                        	MOV	DWORD [-48+EBP],EAX
   280 000002AC 81 3B 000000FF                  	CMP	DWORD [EBX],255
   281 000002B2 0F 8F 0000011B                  	JG	L12
   282 000002B8 68 [0000002E]                   	PUSH	LC5
   283 000002BD BF 00000007                     	MOV	EDI,7
   284 000002C2 E8 [00000000]                   	CALL	_debug_print
   285 000002C7 89 75 E0                        	MOV	DWORD [-32+EBP],ESI
   286 000002CA 8B 0B                           	MOV	ECX,DWORD [EBX]
   287 000002CC 68 [00000528]                   	PUSH	_onWinButtonClick
   288 000002D1 89 C8                           	MOV	EAX,ECX
   289 000002D3 68 00C6C6C6                     	PUSH	13027014
   290 000002D8 99                              	CDQ
   291 000002D9 F7 FF                           	IDIV	EDI
   292 000002DB 89 45 DC                        	MOV	DWORD [-36+EBP],EAX
   293 000002DE 89 4D D4                        	MOV	DWORD [-44+EBP],ECX
   294 000002E1 6B C2 6E                        	IMUL	EAX,EDX,110
   295 000002E4 FF 76 04                        	PUSH	DWORD [4+ESI]
   296 000002E7 6A 04                           	PUSH	4
   297 000002E9 83 C0 55                        	ADD	EAX,85
   298 000002EC 50                              	PUSH	EAX
   299 000002ED 6A 17                           	PUSH	23
   300 000002EF 6A 69                           	PUSH	105
   301 000002F1 68 003C0000                     	PUSH	3932160
   302 000002F6 C7 45 D8 00000002               	MOV	DWORD [-40+EBP],2
   303 000002FD E8 [00000000]                   	CALL	_make_button
   304 00000302 83 C4 24                        	ADD	ESP,36
   305 00000305 89 45 E4                        	MOV	DWORD [-28+EBP],EAX
   306 00000308 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   307 0000030B 39 45 DC                        	CMP	DWORD [-36+EBP],EAX
   308 0000030E 7E 54                           	JLE	L13
   309 00000310 40                              	INC	EAX
   310 00000311 89 43 08                        	MOV	DWORD [8+EBX],EAX
   311 00000314 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   312 00000317 6B F0 07                        	IMUL	ESI,EAX,7
   313 0000031A 69 C0 0000008C                  	IMUL	EAX,EAX,140
   314 00000320 8D 7C 03 24                     	LEA	EDI,DWORD [36+EBX+EAX*1]
   315 00000324                                 L18:
   316 00000324 56                              	PUSH	ESI
   317 00000325 46                              	INC	ESI
   318 00000326 68 [0000004C]                   	PUSH	LC6
   319 0000032B E8 [00000000]                   	CALL	_debug_print
   320 00000330 FF 37                           	PUSH	DWORD [EDI]
   321 00000332 83 C7 14                        	ADD	EDI,20
   322 00000335 E8 [00000000]                   	CALL	_hide_button
   323 0000033A 6B 43 04 07                     	IMUL	EAX,DWORD [4+EBX],7
   324 0000033E 83 C0 06                        	ADD	EAX,6
   325 00000341 83 C4 0C                        	ADD	ESP,12
   326 00000344 39 C6                           	CMP	ESI,EAX
   327 00000346 7E DC                           	JLE	L18
   328 00000348 6A 1B                           	PUSH	27
   329 0000034A 68 00000352                     	PUSH	850
   330 0000034F 6A 04                           	PUSH	4
   331 00000351 6A 55                           	PUSH	85
   332 00000353 FF 75 D0                        	PUSH	DWORD [-48+EBP]
   333 00000356 E8 [00000000]                   	CALL	_sheet_refresh
   334 0000035B 83 C4 14                        	ADD	ESP,20
   335 0000035E 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   336 00000361 89 43 04                        	MOV	DWORD [4+EBX],EAX
   337 00000364                                 L13:
   338 00000364 FF 75 E4                        	PUSH	DWORD [-28+EBP]
   339 00000367 68 003C0000                     	PUSH	3932160
   340 0000036C 8D 75 D4                        	LEA	ESI,DWORD [-44+EBP]
   341 0000036F FF 75 D0                        	PUSH	DWORD [-48+EBP]
   342 00000372 E8 [00000000]                   	CALL	_show_button
   343 00000377 BA 00000007                     	MOV	EDX,7
   344 0000037C 8B 45 D4                        	MOV	EAX,DWORD [-44+EBP]
   345 0000037F 89 D1                           	MOV	ECX,EDX
   346 00000381 99                              	CDQ
   347 00000382 F7 F9                           	IDIV	ECX
   348 00000384 6B D2 6E                        	IMUL	EDX,EDX,110
   349 00000387 6A 1B                           	PUSH	27
   350 00000389 8D 82 000000BE                  	LEA	EAX,DWORD [190+EDX]
   351 0000038F 83 C2 55                        	ADD	EDX,85
   352 00000392 50                              	PUSH	EAX
   353 00000393 6A 04                           	PUSH	4
   354 00000395 52                              	PUSH	EDX
   355 00000396 FF 75 D0                        	PUSH	DWORD [-48+EBP]
   356 00000399 E8 [00000000]                   	CALL	_sheet_refresh
   357 0000039E 83 C4 20                        	ADD	ESP,32
   358 000003A1 8B 03                           	MOV	EAX,DWORD [EBX]
   359 000003A3 B9 00000005                     	MOV	ECX,5
   360 000003A8 6B F8 14                        	IMUL	EDI,EAX,20
   361 000003AB FC                              	CLD
   362 000003AC 8D 7C 3B 14                     	LEA	EDI,DWORD [20+EBX+EDI*1]
   363 000003B0 40                              	INC	EAX
   364 000003B1 F3                              	REP
   365 000003B2 A5                              	MOVSD
   366 000003B3 89 03                           	MOV	DWORD [EBX],EAX
   367 000003B5 FF 75 DC                        	PUSH	DWORD [-36+EBP]
   368 000003B8 FF 75 D4                        	PUSH	DWORD [-44+EBP]
   369 000003BB 68 [00000063]                   	PUSH	LC7
   370 000003C0 E8 [00000000]                   	CALL	_debug_print
   371 000003C5 8B 45 D4                        	MOV	EAX,DWORD [-44+EBP]
   372 000003C8 83 C4 0C                        	ADD	ESP,12
   373 000003CB                                 L11:
   374 000003CB 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   375 000003CE 5B                              	POP	EBX
   376 000003CF 5E                              	POP	ESI
   377 000003D0 5F                              	POP	EDI
   378 000003D1 5D                              	POP	EBP
   379 000003D2 C3                              	RET
   380 000003D3                                 L12:
   381 000003D3 68 [00000088]                   	PUSH	LC8
   382 000003D8 E8 [00000000]                   	CALL	_debug_print
   383 000003DD 83 C8 FF                        	OR	EAX,-1
   384 000003E0 EB E9                           	JMP	L11
   385                                          [SECTION .data]
   386 000000AE                                 LC9:
   387 000000AE 74 61 73 6B 62 61 72 3E 63 6C   	DB	"taskbar>close window %d",0x0A,0x00
       000000B8 6F 73 65 20 77 69 6E 64 6F 77 
       000000C2 20 25 64 0A 00 
   388 000000C7                                 LC10:
   389 000000C7 74 61 73 6B 62 61 72 3E 74 62   	DB	"taskbar>tbctl->num - 1 = %d",0x0A,0x00
       000000D1 63 74 6C 2D 3E 6E 75 6D 20 2D 
       000000DB 20 31 20 3D 20 25 64 0A 00 
   390 000000E4                                 LC11:
   391 000000E4 74 61 73 6B 62 61 72 3E 64 6F   	DB	"taskbar>do window %d",0x0A,0x00
       000000EE 20 77 69 6E 64 6F 77 20 25 64 
       000000F8 0A 00 
   392                                          [SECTION .text]
   393 000003E2                                 	GLOBAL	_taskbar_removewin
   394 000003E2                                 _taskbar_removewin:
   395 000003E2 55                              	PUSH	EBP
   396 000003E3 89 E5                           	MOV	EBP,ESP
   397 000003E5 57                              	PUSH	EDI
   398 000003E6 56                              	PUSH	ESI
   399 000003E7 53                              	PUSH	EBX
   400 000003E8 83 EC 0C                        	SUB	ESP,12
   401 000003EB 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   402 000003EE 8B 15 00030100                  	MOV	EDX,DWORD [196864]
   403 000003F4 89 55 E8                        	MOV	DWORD [-24+EBP],EDX
   404 000003F7 A1 00030200                     	MOV	EAX,DWORD [197120]
   405 000003FC 6B D3 14                        	IMUL	EDX,EBX,20
   406 000003FF 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   407 00000402 8D 34 10                        	LEA	ESI,DWORD [EAX+EDX*1]
   408 00000405 FF 76 24                        	PUSH	DWORD [36+ESI]
   409 00000408 E8 [00000000]                   	CALL	_release_button
   410 0000040D 53                              	PUSH	EBX
   411 0000040E 68 [000000AE]                   	PUSH	LC9
   412 00000413 E8 [00000000]                   	CALL	_debug_print
   413 00000418 8B 4D EC                        	MOV	ECX,DWORD [-20+EBP]
   414 0000041B 8B 11                           	MOV	EDX,DWORD [ECX]
   415 0000041D 4A                              	DEC	EDX
   416 0000041E 52                              	PUSH	EDX
   417 0000041F 68 [000000C7]                   	PUSH	LC10
   418 00000424 E8 [00000000]                   	CALL	_debug_print
   419 00000429 8B 45 EC                        	MOV	EAX,DWORD [-20+EBP]
   420 0000042C 83 C4 14                        	ADD	ESP,20
   421 0000042F 89 5D F0                        	MOV	DWORD [-16+EBP],EBX
   422 00000432 8B 10                           	MOV	EDX,DWORD [EAX]
   423 00000434 4A                              	DEC	EDX
   424 00000435 39 D3                           	CMP	EBX,EDX
   425 00000437 7D 6C                           	JGE	L35
   426 00000439 89 F3                           	MOV	EBX,ESI
   427 0000043B                                 L27:
   428 0000043B FF 75 F0                        	PUSH	DWORD [-16+EBP]
   429 0000043E 68 [000000E4]                   	PUSH	LC11
   430 00000443 8D 73 28                        	LEA	ESI,DWORD [40+EBX]
   431 00000446 8D 7B 14                        	LEA	EDI,DWORD [20+EBX]
   432 00000449 E8 [00000000]                   	CALL	_debug_print
   433 0000044E 8B 53 34                        	MOV	EDX,DWORD [52+EBX]
   434 00000451 B9 00000005                     	MOV	ECX,5
   435 00000456 FC                              	CLD
   436 00000457 FF 4A 20                        	DEC	DWORD [32+EDX]
   437 0000045A BA 00000007                     	MOV	EDX,7
   438 0000045F FF 4B 28                        	DEC	DWORD [40+EBX]
   439 00000462 F3                              	REP
   440 00000463 A5                              	MOVSD
   441 00000464 8B 4B 14                        	MOV	ECX,DWORD [20+EBX]
   442 00000467 89 D6                           	MOV	ESI,EDX
   443 00000469 89 C8                           	MOV	EAX,ECX
   444 0000046B 8B 4B 24                        	MOV	ECX,DWORD [36+EBX]
   445 0000046E 99                              	CDQ
   446 0000046F F7 FE                           	IDIV	ESI
   447 00000471 6B D2 6E                        	IMUL	EDX,EDX,110
   448 00000474 89 43 1C                        	MOV	DWORD [28+EBX],EAX
   449 00000477 83 C2 55                        	ADD	EDX,85
   450 0000047A 89 51 04                        	MOV	DWORD [4+ECX],EDX
   451 0000047D FF 71 08                        	PUSH	DWORD [8+ECX]
   452 00000480 8B 53 24                        	MOV	EDX,DWORD [36+EBX]
   453 00000483 FF 72 04                        	PUSH	DWORD [4+EDX]
   454 00000486 8B 53 24                        	MOV	EDX,DWORD [36+EBX]
   455 00000489 83 C3 14                        	ADD	EBX,20
   456 0000048C FF 72 1C                        	PUSH	DWORD [28+EDX]
   457 0000048F E8 [00000000]                   	CALL	_sheet_slide
   458 00000494 8B 45 EC                        	MOV	EAX,DWORD [-20+EBP]
   459 00000497 FF 45 F0                        	INC	DWORD [-16+EBP]
   460 0000049A 83 C4 14                        	ADD	ESP,20
   461 0000049D 8B 10                           	MOV	EDX,DWORD [EAX]
   462 0000049F 4A                              	DEC	EDX
   463 000004A0 39 55 F0                        	CMP	DWORD [-16+EBP],EDX
   464 000004A3 7C 96                           	JL	L27
   465 000004A5                                 L35:
   466 000004A5 8B 4D EC                        	MOV	ECX,DWORD [-20+EBP]
   467 000004A8 6B 11 14                        	IMUL	EDX,DWORD [ECX],20
   468 000004AB C7 44 11 04 00000000            	MOV	DWORD [4+ECX+EDX*1],0
   469 000004B3 8B 01                           	MOV	EAX,DWORD [ECX]
   470 000004B5 BA 00000007                     	MOV	EDX,7
   471 000004BA 48                              	DEC	EAX
   472 000004BB 89 D6                           	MOV	ESI,EDX
   473 000004BD 99                              	CDQ
   474 000004BE 89 01                           	MOV	DWORD [ECX],EAX
   475 000004C0 F7 FE                           	IDIV	ESI
   476 000004C2 85 D2                           	TEST	EDX,EDX
   477 000004C4 75 47                           	JNE	L28
   478 000004C6 8B 41 08                        	MOV	EAX,DWORD [8+ECX]
   479 000004C9 85 C0                           	TEST	EAX,EAX
   480 000004CB 74 40                           	JE	L28
   481 000004CD 8D 50 FF                        	LEA	EDX,DWORD [-1+EAX]
   482 000004D0 6B C2 07                        	IMUL	EAX,EDX,7
   483 000004D3 89 51 08                        	MOV	DWORD [8+ECX],EDX
   484 000004D6 89 51 04                        	MOV	DWORD [4+ECX],EDX
   485 000004D9 69 D2 0000008C                  	IMUL	EDX,EDX,140
   486 000004DF 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   487 000004E2 8D 5C 11 24                     	LEA	EBX,DWORD [36+ECX+EDX*1]
   488 000004E6                                 L33:
   489 000004E6 FF 33                           	PUSH	DWORD [EBX]
   490 000004E8 68 003C0000                     	PUSH	3932160
   491 000004ED 83 C3 14                        	ADD	EBX,20
   492 000004F0 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   493 000004F3 E8 [00000000]                   	CALL	_show_button
   494 000004F8 8B 4D EC                        	MOV	ECX,DWORD [-20+EBP]
   495 000004FB FF 45 F0                        	INC	DWORD [-16+EBP]
   496 000004FE 83 C4 0C                        	ADD	ESP,12
   497 00000501 6B 51 04 07                     	IMUL	EDX,DWORD [4+ECX],7
   498 00000505 83 C2 06                        	ADD	EDX,6
   499 00000508 39 55 F0                        	CMP	DWORD [-16+EBP],EDX
   500 0000050B 7E D9                           	JLE	L33
   501 0000050D                                 L28:
   502 0000050D 6A 1B                           	PUSH	27
   503 0000050F 68 00000352                     	PUSH	850
   504 00000514 6A 04                           	PUSH	4
   505 00000516 6A 55                           	PUSH	85
   506 00000518 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   507 0000051B E8 [00000000]                   	CALL	_sheet_refresh
   508 00000520 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   509 00000523 5B                              	POP	EBX
   510 00000524 5E                              	POP	ESI
   511 00000525 5F                              	POP	EDI
   512 00000526 5D                              	POP	EBP
   513 00000527 C3                              	RET
   514 00000528                                 	GLOBAL	_onWinButtonClick
   515 00000528                                 _onWinButtonClick:
   516 00000528 55                              	PUSH	EBP
   517 00000529 89 E5                           	MOV	EBP,ESP
   518 0000052B 5D                              	POP	EBP
   519 0000052C C3                              	RET
   520 0000052D                                 	GLOBAL	_onStartButtonClick
   521 0000052D                                 _onStartButtonClick:
   522 0000052D A1 [000000FC]                   	MOV	EAX,DWORD [_start_menu]
   523 00000532 55                              	PUSH	EBP
   524 00000533 89 E5                           	MOV	EBP,ESP
   525 00000535 8B 0D 00000FE4                  	MOV	ECX,DWORD [4068]
   526 0000053B 8B 50 18                        	MOV	EDX,DWORD [24+EAX]
   527 0000053E 85 D2                           	TEST	EDX,EDX
   528 00000540 74 14                           	JE	L40
   529 00000542 4A                              	DEC	EDX
   530 00000543 74 02                           	JE	L41
   531 00000545                                 L38:
   532 00000545 C9                              	LEAVE
   533 00000546 C3                              	RET
   534 00000547                                 L41:
   535 00000547 50                              	PUSH	EAX
   536 00000548 68 003C0000                     	PUSH	3932160
   537 0000054D E8 [00000000]                   	CALL	_hide_menu
   538 00000552 58                              	POP	EAX
   539 00000553 5A                              	POP	EDX
   540 00000554 EB EF                           	JMP	L38
   541 00000556                                 L40:
   542 00000556 50                              	PUSH	EAX
   543 00000557 68 003C0000                     	PUSH	3932160
   544 0000055C 51                              	PUSH	ECX
   545 0000055D E8 [00000000]                   	CALL	_show_menu
   546 00000562 83 C4 0C                        	ADD	ESP,12
   547 00000565 EB DE                           	JMP	L38
   548 00000567                                 _onOpenConsoleClick:
   549 00000567 55                              	PUSH	EBP
   550 00000568 89 E5                           	MOV	EBP,ESP
   551 0000056A 6A 02                           	PUSH	2
   552 0000056C FF 35 00000FEC                  	PUSH	DWORD [4076]
   553 00000572 E8 [00000000]                   	CALL	_fifo32_put
   554 00000577 C9                              	LEAVE
   555 00000578 C3                              	RET
   556 00000579                                 _onShutdownClick:
   557 00000579 55                              	PUSH	EBP
   558 0000057A 89 E5                           	MOV	EBP,ESP
   559 0000057C 5D                              	POP	EBP
   560 0000057D E9 [00000000]                   	JMP	_acpi_shutdown
   561 00000582                                 _on8042ResetCPUClick:
   562 00000582 55                              	PUSH	EBP
   563 00000583 89 E5                           	MOV	EBP,ESP
   564 00000585 5D                              	POP	EBP
   565 00000586 E9 [00000000]                   	JMP	_reset_cpu
   566 0000058B                                 _onUselessClick:
   567 0000058B 55                              	PUSH	EBP
   568 0000058C 89 E5                           	MOV	EBP,ESP
   569 0000058E 5D                              	POP	EBP
   570 0000058F C3                              	RET
   571 00000590                                 	GLOBAL	_start_menu
   572                                          [SECTION .data]
   573 000000FA 00 00                           	ALIGNB	4
   574 000000FC                                 _start_menu:
   575 000000FC 00 00 00 00                     	RESB	4
